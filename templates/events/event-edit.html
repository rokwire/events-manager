{% extends "base.html" %}

{% block title %}
  Edit - {{post.title}}
{% endblock %}

{% block styles %}
  {{ super() }}
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.9/dist/css/bootstrap-select.min.css">
{% endblock %}

{% block modals %}
<!-- the save Confirmation form -->
<div id="SaveModal" class="modal fade" role="dialog">
 <div class="modal-dialog modal-lg" role="content">
   <!-- Modal content-->
   <div class="modal-content">
     <div class="modal-header">
         <h4 class="modal-title">Confirmation </h4>
         <button type="button" class="close" data-dismiss="modal">&times;</button>
     </div>
     <div class="modal-body">
       <form>
         <!-- table form here -->
         <div class="form-group row">
             <label class="col-12 col-form-label"><center>You are about to save your edition the following event: </center></label>
         </div>
         <div class="form-group row">
             <h2 class="col-12">{{post.title}}</h2>
         </div>
         <div class="offset-md-2 col-md-10">
             <button type="button" class="btn btn-secondary btn-sm-1" data-dismiss="modal">Cancel</button>
             <button type="submit" class="btn btn-primary btn-sm-1">Confirm</button>
         </div>
        </form>
       </div>
     </div>
   </div>
 </div>
{% endblock %}


{% block content %}
 <!-- filter and select operations -->
  <!-- back to all events button -->
  {% if isUser %}
  <form id = "form" action = "{{url_for('user_events.user_an_event_edit', id=post['_id'])}}" method="POST">
  <div class="media row-content">
    <a class="btn btn-dark" href="{{ url_for('user_events.user_events') }}" role="button">Back To All Events</a>
  </div>
  {% else %}
  <form id = "form" action = "{{url_for('event.edit', eventId=post['_id'])}}" method="POST">
  <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="{{ url_for('event.source', sourceId=post['sourceId']) }}">{{sourceName}}</a></li>
      <li class="breadcrumb-item"><a href="{{ url_for('event.calendar', calendarId=post['calendarId']) }}">{{calendarName}}</a></li>
      <li class="breadcrumb-item active" aria-current="page">{{post['title']}}</li>
    </ol>
  </nav>
  {% endif %}
  <!-- form inputs -->
     <article class="media content-section">
       <div class="media-body">
          <h2><a class="article-title" href="{{ post.titleURL}}">{{ post.title }}</a></h2>
          <hr class="divider"/>
          <!-- event url -->
          {% if post.titleURL%}
            <div class="form-group row row-content">
              <label class="col-12 col-sm-2 form-control-label">
                <h5>Event URL: </h5>
              </label>
              <div class="col-sm-9">
                <input class="form-control" type="url" name="titleURL" value={{post.titleURL}} />
              </div>
            </div>
          {% else %}
          <div class="form-group row row-content">
            <label class="col-12 col-sm-2 form-control-label">
              <h5>Event URL: </h5>
            </label>
            <div class="col-sm-9">
              <input class="form-control" type="url" name="titleURL"/>
            </div>
          </div>
          {% endif %}

          <!-- event category -->
          <!-- update TODO -->
          <div class="form-group row row-content">
            <div class="col-12 col-sm-2">
              <h5>Category: </h5>
            </div>
            <div class="col-sm-9">
              <div class="form-group">
                <select id = "selectlist" class="selectpicker" title="Event Type..." >
                  {% for key in eventTypeValues %}
                    {% if eventTypeMap[post.category] == key %}
                      <option id = {{key}} selected = true>{{key}}</option>
                    {% else %}
                      <option id = {{key}}>{{key}}</option>
                    {% endif %}
                  {% endfor %}
                </select>
              </div>
            </div>
          </div>

          <!-- subcategory -->
          {% if post.subcategory %}
            <div class="form-group row row-content">
              <div class="col-12 col-sm-2">
                <h5>Sub Category: </h5>
              </div>
              <div class="col-sm-9">
                <input class="form-control" type="text" name="subcategory" value={{post.subcategory}} />
              </div>
            </div>
          {% else %}
            <div class="form-group row row-content">
              <div class="col-12 col-sm-2">
                <h5>Sub Category: </h5>
              </div>
              <div class="col-sm-9">
                <input class="form-control" type="text" name="subcategory"/>
              </div>
            </div>
          {% endif %}

          <!-- startDate -->
          {% if post.startDate%}
            <div class="form-group row row-content">
              <div class="col-12 col-sm-2">
                <h5> Start Date: </h5>
              </div>
              <div class="col-sm-9">
                <input class="form-control" type="datetime-local" name="startDate" value={{post.startDate}} min="2000-01-01T00:00" max="2050-01-01T00:00" />
              </div>
            </div>
          {% else %}
            <div class="form-group row row-content">
              <div class="col-12 col-sm-2">
                <h5> Start Date: </h5>
              </div>
              <div class="col-sm-9">
                <input class="form-control" type="datetime-local" name="startDate" min="2000-01-01T00:00" max="2050-01-01T00:00" />
              </div>
            </div>
          {% endif %}

          <!-- endDate -->
          {% if post.endDate%}
            <div class="form-group row row-content">
              <div class="col-12 col-sm-2">
                <h5>End Date: </h5>
              </div>
              <div class="col-sm-9">
                <input class="form-control" type="datetime-local" name="endDate" value={{post.endDate}} />
              </div>
            </div>
          {% else %}
            <div class="form-group row row-content">
              <div class="col-12 col-sm-2">
                <h5> End Date: </h5>
              </div>
              <div class="col-sm-9">
                <input class="form-control" type="datetime-local" name="endDate" min="2000-01-01T00:00" max="2050-01-01T00:00" />
              </div>
            </div>
          {% endif %}

          <!-- location -->
          {% if post.location %}
            <!-- description -->
            {% if post.location.description %}
              <div class="form-group row row-content">
                <div class="col-12 col-sm-2">
                  <h5>Location: </h5>
                </div>
                <div class="col-sm-9">
                  <input class="form-control" type="text" value={{post.location.description}} />
                </div>
              </div>
            {% endif %}
            <!-- address -->
            <!-- {% if post.location.address %}
              <div class="form-group row row-content">
                <div class="col-12 col-sm-2">
                  <h5>Address: </h5>
                </div>
                <div class="col-sm-9">
                  <input class="form-control" type="text" value={{post.location.address}} />
                </div>
              </div>
            {% endif %} -->
          {% endif %}

          <!-- target audience -->
          <!-- TODO -->
          {% if post.targetAudience %}
            <div class="form-group row row-content">
              <div class="col-12 col-sm-2">
                <h5>Target Audience: </h5>
              </div>
              <div class = "col-sm-2">
              {%for audience in post.targetAudience%}
                <input class="form-control" type="text" value={{audience}} />
              {% endfor%}
              </div>
            </div>
          <!-- if there is no target audience TODO -->
          {% else %}
            <div class="form-group row row-content">
              <div class="col-12 col-sm-2">
                <h5>Target Audience: </h5>
              </div>
              <div class = "col-sm-2">
              <input class="form-control" type="text"  />
              </div>
            </div>
          {% endif %}

          <!-- cost -->
          {% if post.cost%}
            <div class="form-group row row-content">
              <div class="col-12 col-sm-2">
                <h5>Cost: </h5>
              </div>
              <div class="col-sm-9">
                <input class="form-control" type="text" name="cost" value={{post.cost}} />
              </div>
            </div>
          {% else %}
            <div class="form-group row row-content">
              <div class="col-12 col-sm-2">
                <h5>Cost: </h5>
              </div>
              <div class="col-sm-9">
                <input class="form-control" type="text" name="cost"/>
              </div>
            </div>
          {% endif %}

          <!-- contacts -->
          <!--  TODO -->
          {% if post.contacts %}
            {% for contact in post.contacts %}
              {% if contact.firstName and contact.lastName %}
                <div class="form-group row row-content">
                  <div class="col-12 col-sm-2">
                    <h5>Contact Person: </h5>
                  </div>
                  <div class="col-sm-2">
                    <input class="form-control" type="text" value={{contact.firstName}} />
                  </div>
                  <div class="col-offset-6 col-sm-2">
                    <input class="form-control" type="text" value={{contact.lastName}} />
                  </div>
                </div>
              {% elif contact.firstName %}
                <div class="form-group row row-content">
                  <div class="col-12 col-sm-2">
                    <h5>Contact Person: </h5>
                  </div>
                  <div class="col-sm-2">
                    <input class="form-control" type="text" value={{contact.firstName}} />
                  </div>
                  <div class="col-offset-6 col-sm-2">
                    <input class="form-control" type="text" />
                  </div>
                </div>
              {% elif contact.lastName %}
                <div class="form-group row row-content">
                  <div class="col-12 col-sm-2">
                    <h5>Contact Person: </h5>
                  </div>
                  <div class="col-sm-2">
                    <input class="form-control" type="text" />
                  </div>
                  <div class="col-offset-6 col-sm-2">
                    <input class="form-control" type="text" value={{contact.lastName}} />
                  </div>
                </div>
              {% else %}
                <div class="form-group row row-content">
                  <div class="col-12 col-sm-2">
                    <h5>Contact Person: </h5>
                  </div>
                  <div class="col-sm-2">
                    <input class="form-control" type="text" />
                  </div>
                  <div class="col-offset-6 col-sm-2">
                    <input class="form-control" type="text" />
                  </div>
                </div>
              {% endif %}

              {% if contact.email %}
                <div class="form-group row row-content">
                  <div class="col-12 col-sm-2">
                    <h5>Contact Email: </h5>
                  </div>
                  <div class="col-sm-9">
                    <input class="form-control" type="email" value={{contact.email}} />
                  </div>
                </div>
              {% else %}
                <div class="form-group row row-content">
                  <div class="col-12 col-sm-2">
                    <h5>Contact Email: </h5>
                  </div>
                  <div class="col-sm-9">
                    <input class="form-control" type="email"/>
                  </div>
                </div>
              {% endif %}

              {% if contact.phone %}
                <div class="form-group row row-content">
                  <div class="col-12 col-sm-2">
                    <h5>Contact Phone: </h5>
                  </div>
                  <div class="col-sm-9">
                    <input class="form-control" type="text" value={{contact.phone}} />
                  </div>
                </div>
              {% else %}
                <div class="form-group row row-content">
                  <div class="col-12 col-sm-2">
                    <h5>Contact Phone: </h5>
                  </div>
                  <div class="col-sm-9">
                    <input class="form-control" type="text" value=/>
                  </div>
                </div>
              {% endif %}
            {% endfor%}
          <!-- if there is no contact currently TODO -->
          {% else %}


          {% endif %}

          <!-- tags TODO-->
          {% if post.tags%}
            <div class="form-group row row-content">
              <div class="col-12 col-sm-2">
                <h5>Tags: </h5>
              </div>
              <div class = "col-sm-2">
              {% for tag in post.tags%}
                  <input class="form-control" type="text" value={{tag}} />
              {% endfor%}
              </div>
            </div>
          {% endif %}

          <!-- sponsor -->
          {% if post.sponsor%}
            <div class="form-group row row-content">
              <div class="col-12 col-sm-2">
                <h5>Sponsor: </h5>
              </div>
              <div class="col-sm-9">
                <input class="form-control" type="text" name="sponsor" value={{post.sponsor}} />
              </div>
            </div>
          {% else %}
            <div class="form-group row row-content">
              <div class="col-12 col-sm-2">
                <h5>Sponsor: </h5>
              </div>
              <div class="col-sm-9">
                <input class="form-control" type="text" name="sponsor"/>
              </div>
            </div>
          {% endif %}

          <!-- description -->
          <!-- TODO -->
          {% if post.description%}
          <div class="form-group row row-content">
            <div class="col-12 col-sm-2">
              <h5>Description: </h5>
            </div>
            <div class="col-12 col-sm-9">
                <textarea class="form-control" rows="12">{{post.description}}</textarea>
            </div>
          </div>
          {% else %}
            <div class="form-group row row-content">
              <div class="col-12 col-sm-2">
                <h5>Description: </h5>
              </div>
              <div class="col-12 col-sm-9">
                  <textarea id="description" class="form-control" rows="12"></textarea>
              </div>
            </div>
          {% endif %}
        </div>
     </article>

  <!-- cancel/submit button groups -->
  <div class="row justify-content-center">
   <div role="toolbar" aria-label="Toolbar with button groups">
     <div class="btn-group mr-2" role="group" aria-label="first group">
       {% if isUser %}
       <a class="btn btn-block nav-link btn-outline-secondary" href="{{ url_for('user_events.user_an_event', id=post['_id']) }}" role="button">Cancel</a>
       {% else %}
       <a class="btn btn-block nav-link btn-outline-secondary" href="{{ url_for('event.detail', eventId=post['_id']) }}" role="button">Cancel</a>
       {% endif %}
     </div>
     <div class="btn-group mr-2" role="group" aria-label="Second group">
       <!-- discard the modal use js to alarm Confirmation later -->
       <!-- <a class="btn btn-block nav-link btn-primary" role="button" data-toggle="modal" data-html="true" data-target="#SaveModal">Save</a> -->
       <button class="btn btn-block nav-link btn-primary" role="submit" >Save</button>
     </div>
   </div>
  </div>
</form>
{% endblock %}

<!-- js script for select list in form -->
{% block scripts %}
  {{super()}}
   <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.9/dist/js/bootstrap-select.min.js"></script>
{% endblock %}
